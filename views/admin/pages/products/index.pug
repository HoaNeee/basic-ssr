extends ../../layouts/default.pug
include ../../mixins/filterStatus.pug
include ../../mixins/search.pug
include ../../mixins/pagination.pug
include ../../mixins/formChangeMulti.pug
include ../../mixins/alert.pug

block main 
  +alert-success(2500)
  +alert-error(2500)
      
  h1 Trang products
  .card
    .card-header 
      p Bộ lọc
    .card-body
      .row
        .col-6
          +filterStatus(filtersStatus)
        .col-6
          +formSearch(query)

  +formChangeMulti(`${prefixAdmin}/products/change-multi?_method=PATCH`)

  table(
    class="table table-hover"
  ) 
    thead 
      tr  
        th 
          input(type="checkbox" name="checkAll")
        th STT
        th Hình ảnh
        th Tiêu đề
        th Giá
        th Vị trí
        th Trạng thái 
        th Hành động 
       
    tbody 
      each item,index in products 
        tr 
          td 
            input(type="checkbox" value=item._id name="id-change")
          td #{index + 1}
          td 
            img(src=item.thumbnail, alt="image" width="100px" height="50px")
          td 
            p #{item.title}
          td 
            p #{item.price}
          td 
            input(type="number" min="1" value=item.position style="width:100px;" name="position")
          td 
            if(item.status === "active")
              a(href="javascript:;" class="badge badge-success" data-status="active" data-id=item._id btn-change-status) Hoạt động
            else
              a(href="javascript:;" class="badge badge-danger" data-status="inactive" data-id=item._id btn-change-status) Dừng hoạt động
            
          td 
            a(href=`${prefixAdmin}/products/detail/${item._id}` class="btn btn-secondary btn-sm") Chi tiết
            a(class="btn btn-warning btn-sm mx-2" href=`${prefixAdmin}/products/edit/${item._id}`) Sửa 
            button(class="btn btn-danger btn-sm" btn-delete value= item._id) Xóa 
  
    form(
      action=""
      method="POST"
      id="form-change-status"
      data-path=`${prefixAdmin}/products/change-status`
    ) 

    form(
      action=""
      method="POST"
      id="form-delete-item"
      data-path=`${prefixAdmin}/products/delete`
    ) 

    
  +pagination(objPagi)

  script(src="/admin/js/product.js") 